## 22/08/21, Sun

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-21_06.39.34.jpg" width="240px">

ついSiPEEDの一番大きなFPGAが載っているTangPremier 20Kをポチってしまった。

今日明日と[プリント基板製造・3Dプリント出力サービスのJLCPCB](https://www.jlcpcb.com)へ行ってきた。主目的は高須さんが出演するJLCPCBのプロモーションビデオの撮影で、それについて行かせてもらった、という形。結果として、JLCPCBの工場訪問、ということになった。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-21_08.42.35.jpg" width="240px">

JLCPCBにはいくつか工場があるんだけど、今日おじゃまするのは、珠海市にある工場。珠海は深センから「珠江デルタ」の反対側で、マカオ（澳门(ao4men2）のすぐとなり。深センの宝安空港から珠江デルタの反対側の中山市（珠海市のすぐ北）までの橋を建設中んだけど、まだできていないので、ぐるっと北の方を通って行くことになる。具体的には、深セン→東莞→広州市南河区→中山市→珠海市、という経路になる。深センから高速道路を2時間くらいで珠海市につく。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-21_09.43.21.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-21_13.46.49.jpg" width="240px">

JLCPCBの珠海工場は、珠海市の西の方で、更に進む。親会社の[「先进电子」](https://www.amap.com/place/B02F401IAV)が工場。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-21_13.46.44.jpg" width="240px">

ちなみに同じグループの部品調達の[LCSC](https://www.szlcsc.com/)の珠海倉庫もここ。

今日は3Dプリント工場での撮影で、基本的に工場内は撮影禁止なので、気づいたことなどを箇条書きに。JLCPCBでは現在5種類の3Dプリント整形方法が利用できる。（詳細は、いずれ公開される高須さん出演のプロモーションビデオで）

- FDM: 一般的な積層成形。よく使われているのを見かけるRaise3DProが数台。一人、専属のスタッフがいて、途中でしっぱいしてないか（もじゃもじゃになってないか）を見ている。
- SLA: いわゆる光造形。レジンは5種類から選べる。一番注文が多く、85台が稼働中。人手はほとんどいなくて、材料補充と取り出しなどを数人で巡回している。可塑性の素材があるようだ。
- MJF: HPのインクジェット式。プラスチック粉末を敷き詰めたところに、熱溶融を促進するインクを固化したいところに塗布し、ランプで溶融。異方性がないので強度がある。同時にカラーのインクを塗布することでフルカラー成形（ただし発色はややイマイチ）もできる。
- SLM: 金属（ステンレス）の粉末を敷き詰めたところにレーザーを照射して焼結。現在は1台のみ。
- SLS: ナイロン6（熱に強い：147度まで軟化しない）の粉末を、SLMと同様にレーザー焼結。

いままで、それぞれの違いがいまいちよくわかってなかったんだけど、それぞれの特徴がよくわかった。そういえばだいぶ前に同じデータで素材を変えて3種類つくったことがあったので、改めて比べてみようと思う。

あと、注文される成形物は、各3Dプリンタの成形エリア（だいたい40cm角以上）よりも十分小さいものが多いので、面付け作業をして、複数の成形物を一度に成形している場合が多いようだった。プリント基板と同じだな。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-21_12.54.58.jpg" width="240px">

休憩のときに会議室にプリント基板のサンプルがあったんだけど、16層なんてのもあった。さすがにけっこうずっしりと重くて厚さも2.5mmくらいあった。

工場に入るときには靴のカバーをつけるんだけど、[こういう自動の機械](https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-21_13.40.01.mp4)があった。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-21_20.14.17.jpg" width="240px">

[JLCPCBの中国版サイト](https://www.jlc.com/)には、工場のライブカメラ中継があるんだけど、お願いをして、ライブカメラのところに行ってきた。今回は[シルク印刷工程](https://m.jlc.com/.../6a97a8669c6d4f1793fb5428ed297e56/0)のところで、たしかに実際にライブカメラ画像に写っていた。つまり本物の工場のライブ中継、ということだ。工場の可視化、という意味で、いい試みだと思う。なお当然ながら、周りで働いている工場の人たちには、何やってんだこいつら？という目で見られていたw

工場は広くてきれいで整理も行き届いているんだけど、製造管理はそれなりに紙ベースのものもあって（例えば出荷前の仕分けを、並べた製品に、印刷されたシールを順番に貼る、という工程もあって、順番間違えないのか心配になった）、また手動の部分もあって（プリント基板の加工機への加工データの入力は、紙の発注書に書いてある加工ファイル名をみて、そのファイルをコピーしてくる、とか）、改善の余地はあるのかな、と思った。


## 22/08/22, Mon

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-22_7.00.49.png" width="240px">

昨日見てきて原理を理解したフルカラー3Dプリント（MJF方式・PAC-HP Nylon）、ちょっと試してみようと思って、まずは下調べ。カラーの3Dデータは、JLCPCBではSTL形式ではだめ（形状情報だけ）で、OBJ形式などが受け付けられる。[いろいろなカラー3Dデータが登録されているWebサイト](https://news.sharelab.jp/3dp-news/others/obj-211012/)もあるようで、そこから[適当な3Dデータ](https://www.turbosquid.com/3d-models/free-max-model-apple/549455)を探してみた。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-22_7.01.45.png" width="240px">

これでJLCPCBで見積もり出してみたら、7cm立方で7万円くらい。けっこう高いなー。シャレで済む範囲で試すなら2cm立方くらいに縮小してからかなー。

プリント基板に部品を実装するSMT室。ヤマハのマウンタS20が100台近くある。マウンタの前後にはんだペースト塗布やリフロー炉をつけてラインにする。部品種類が多い基板向けに2台連結ラインや、少ない基板向けに2台を別々に実装してリフロー炉が共通、というラインもある。このあたりは、どこまで動的に組み替えるのかはわからないけど、注文内容の傾向に応じて最適化はできそう。

またJLCPCBのPCBA（部品実装）で使える部品にはBasicとExtendedの2種類があって、微妙に価格が違うんだけど、このマウンタは1台あたり部品のカートリッジが36個x2セットをセットできる。つまり使える部品の種類は最大で72種類。そして36個分を1つのカートに載せて、カートごと差し替えるようになっている。聞いたところでは、片方はBasicの部品、もう片方はExtendedの部品、だそうだ。Extenedのほうは、注文内容に応じて使う部品のカートリッジをセットする（注文内容に応じて、人手でカートに使う部品のカートリッジをセットする）。Basicの方も、使える部品は300種類近くあるので、全部はセットできない。どうも「よく使う組み合わせ」を最大36個セットしたカートとして用意しておいて、適切なものを使うようだ。ここも、注文内容の傾向に応じて動的に組み換えがききそう、つまりIndustry4.0的なビッグデータが有効な場面と言える。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-22_13.56.23.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-22_14.02.23.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-22_14.08.12.jpg" width="240px">

部品ショップの[LCSC](https://www.lcsc.com)の倉庫は圧巻。40万種類の部品が倉庫に並んでいるわけなんだけど、端が見えないくらいのフロアが2階分。注文に応じて、人手で棚からピックアップして、必要ならばリールをカットしていく。ここは、部品の形状・サイズがバラバラなので自動化しない（できない）んだろうな。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-22_14.17.56.jpg" width="240px">

その台車にはリールの部品の個数がひと目で分かる目盛りがついている。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-22_14.08.42.jpg" width="240px">

当然ながら、購入した部品を仕分けして棚に入れる作業もあるわけで、こんな感じでどんどん入れていく。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-22_14.10.13.jpg" width="240px">

このLCSC（立创商城）のロゴの入ったスタックできる部品箱、ちょっとほしいかも。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-22_14.30.27.jpg" width="240px">

ところで土曜の夜にふと思い立ってポチったJLCPCBの3Dプリント、日曜日はレビューが終わらず、月曜の午後になってやっとレビューが終わって製造にまわった。たださすがに滞在中に製造開始にはならず、整形される現場を見ることはできなかった。残念。

昨日今日を通して、JLCPCBの工場は規模が圧倒的で、そこに自動化が加わって、強みになっている。それも大量生産ではなく、少量多品種に最適化されている（それができるように進化している）、という点が興味深かった。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-22_17.28.01.jpg" width="240px">

あと、3Dプリント用のレジンも、こんな単位で購入して搬入される。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-22_20.56.04.jpg" width="240px">

TwitterのTLで、[「CPUの創り方」](https://www.amazon.co.jp/dp/4839909865/)の4ビットCPU「TD4」のキットが、[TaoBaoで売っている](https://m.tb.cn/h.U0RGTqD?tk=ff3D2uau5lo)のを見つけた。「人類の三大欲求の一つ」である自作CPUが、中国にも来ているとは。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-22_21.15.01.jpg" width="240px">

"CPU DIY TD4"TaoBaoで検索すると、いくつか違うのがひっかかる。何種類かあるようだ。底知れないな。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-22_21.29.41.jpg" width="240px">

あと、こんな本も見つけた。どういう観点で書かれているか、ちょっと興味があるので、買ってみよう。


## 22/08/23, Tue

[Google/SkywaterのMPWに、GlobalFoundaryも参加の模様](https://pc.watch.impress.co.jp/docs/column/tidbit/1433235.html)、のようだ。選択肢が広がる枠組みはいいね。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_12.01.50.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_12.05.42.jpg" width="240px">

今日も展示会祭りだ！と、出かけたら、宝安区の北の方で陽性者出た影響で緊急延期になってたの巻。というわけで急に自由時間が増えてしまった。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_14.29.23.jpg" width="240px">

今日はiMakerbaseに急に来ることになった（深セン政府の偉い人がくるので外国人待機）ので、せっかくなので、デジタル加工機材を購入・移設したものの、直後にコロナ禍になって、主に使う外国人が入国できない状態で放置されてるMakerSpaceの再始動をはじめることにした。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_14.20.30.jpg" width="240px">

レーザーカッターは最初電源が入らずに焦ったけど、EmergencyStopが押されたただけだで、それを解除して無事通電起動。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_14.26.51.jpg" width="240px">

それより、レーザー管冷やす水冷系のチューブない。内径10mmのやつを調達しなきゃ。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_14.08.05.jpg" width="240px">

あと、排気系つながなきゃだな。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_14.07.54.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_14.32.42.jpg" width="240px">

PC接続用のUSBケーブルのコネクタが、平A型。つまり両側が平A型コネクタのケーブルがいることになるわけで、そんなもん普通はないぞ、と思ったら、付属品のケーブルがあった。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_14.45.37.jpg" width="240px">

PCに接続してCOMポート出てきたから接続は大丈夫そう。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_14.46.44.jpg" width="240px">

使うソフトもRDWorksとわかった。読み込めるファイル形式も多そう。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_15.03.06.jpg" width="240px">

もう1つの3Dプリンタ（レーザー・CNCのヘッドも使える）のSnapMakerのほうも、通電はできた。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_15.03.37.jpg" width="240px">

こっちはそのまま使えそう。フィラメントも（いつのかわからないけど）セットはしてある。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_15.13.32.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_15.13.39.jpg" width="240px">

USBメモリ挿すとこはここか。カバーがこんな感じでスライドして開くの、いいな。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_16.59.07.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_16.59.14.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-23_16.59.19.jpg" width="240px">

iMakerbaseに入居している、プロモーションビデオとかを作っている[CheeseFlow](https://cheeseflow.com/)のオフィスに、撮影用FPV（一人称視点）ドローンのフライトンとローラを作っている[ZEEZ](https://zeezrc.com/)という会社がいるのを見つけた。マイコン仕込んでる。こういうスタートアップのエコシステムもあるんだな。

このまえ買ったXiaomiのARグラス、撮影した画像の転送が始まらないなー、と思ったら、VPNが悪さをしているのがわかった（WiFi経由の伝送）。VPNを切れば、本体の電源を入れておけば、アプリで「文件空間」を開けば、自動で接続・転送される。（そこからスマホの「写真」への転送はもう一段階いる）


## 22/08/24, Wed

先日のJLCPCBの工場見学で3Dプリントの成形法の理解が深まったので、以前作った成形物を再確認。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-24_08.56.00.jpg" width="240px">

左からSLA（レジン光造形）、MJF（インクジェット熱成形）、SLS（ナイロン6レーザー成形）。SLAは少し変色してるが、表面は滑らか。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-24_10.02.12.jpg" width="240px">

MJFはヘッド移動と思われるの3mm幅くらいの水平縞がみえる。SLSは等方で縞は見えない。MJF/SLSは表面が少しざらざらしている。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-24_10.46.35.png" width="240px">

JLCPCBカラー3Dプリント、フリーのりんごをBlenderで縮小してみた。このサイズだと17USDだから、まあお試しとしてはアリかな。ただuploadするのがOBJ形式だけで、テクスチャ情報を登録できない。ヘルプにも書いてないっぽいので、チャットで問い合わせ中。OBJ形式は形状情報のみでテクスチャなし、というのを知らないとこのままポチってしまうハマリポイントなのでは。回答としては、テクスチャを埋め込んだOBJ形式でアップロード、しかなさそうで、それはBlender単体ではできなさそう。そしてアップロード後のプレビューは、テクスチャの有無に関わらず青で表示される、つまりプレビュー画面で確認することはできない、と。ふむ。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-24_14.04.30.png" width="240px">

で、詳しい人に「色情報を持つOBJ形式の3Dデータ」について聞いてみた。一般的には、形状(*.obj)とは別に、メタデータ(*.mtl)とテクスチャ画像(*.jpg)のセットを1つのフォルダに入れたものを扱うもので、つまり形状とテクスチャは別管理。「色情報を持つOBJ形式の3Dデータ」のためにはレンダリングが必要で、けっこうめんどくさい、とのこと。FBX形式か、これらのファイルをzipで固めたものなら、まだ簡単なのにな、とのことだった。試しに、Blenderで、読み込んでレンダリングしたOBJ+MTL+テクスチャ画像を、いったんFBXでエクスポートし、それを再度インポート後、OBJ(experimental)でエクスポートしたら、それっぽいOBJができた。ただしプレビューでは確認できないけど、ファイルサイズを見る限りテクスチャが含まれているっぽい。注文時コメントに確認依頼を入れてポチってみることにする。なお3500円くらい。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-24_22.04.44.png" width="240px">

夕方になってレビュー返ってきた。なんかめんどくさくなってきた。コメントに確認をしてくれと書いていたテクスチャのことは一言も言及してないし。このままキャンセルするか。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-24_10.22.10.jpg" width="240px">

昨日届いたSiPEEDのTangPremier20K、まずは[ドキュメントページ](https://wiki.sipeed.com/hardware/zh/tang/tang-primer-20k/primer-20k.html)を見つけた。まあだいたい読める。IDEはWin/Linux用のみ、[GettingStartedのLチカ](https://wiki.sipeed.com/news/others/20k_lite_start/20k_lite_start.html)もあった。やってみるかー。

先日の[CITE](https://github.com/akita11/SZdiary/blob/main/diary/research/2208-2.md#220817-wedで見つけた)、「SZICC」と「微纳研究院」について、安先生に聞いてみた。前者は知らなかったけど深セン市政府のIC産業基地のようだった。後者は知っていて、南方科技大もSMEの偉い人が締結式にでてたりする。ベースは「点石」というVCで、そこがお金を出してスタートアップの支援や人材交流などをやっている、ということのようだ。安先生もチップを作らないか、という話ももらったそうなんだけど、あまりに高くてやめた、とのことだった。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-24_18.00.00.jpg" width="240px">

今日の午後は、ElephantRoboticsに南方科技大の[刘先生](https://www.sustech.edu.cn/en/faculties/liujiang.html)という方が来るというので、研究者交流の一環としておじゃましてきた（この写真の左から3人め）。専門はコンピュータ科学、特に医療画像（の深層学習）まわりで、とてもよい研究をされている方のようだ。研究の内容もそうなんだけど、それ以上に、研究グループのマネージメントや実社会との連携などがとても活発でバランス感覚のある方だった。


## 22/08/25, Thu

中華CPUの[「龍芯」](https://ja.wikipedia.org/wiki/%E9%BE%8D%E8%8A%AF)というのがあるのを見つけた。MIPSアーキテクチャで2001年に中国科学院でスタート、2010年から商用化、ずっとMIPSアーキテクチャ。2019年で28nm4コア2GHz。中国内ではASSP的にそれなりに使われていて中国科学院ではスパコンにも。

そういえばPCB発注時にデータを登録しておいて他の人が発注できる（少しロイヤリティが入る）の、[DirtyPCBs](https://dirtypcbs.com/store/designer/details/kennakagaki/6260/handa-shingyo-v0-0--v0-0)でやってるし、昔はFusionPCBでもやって気がする。サービス提供側としては、採算あうんだろうか。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-25_13.57.42.png" width="240px">

午後はオンライン生放送の講演会（直播）を聴講。お題は「先端パッケージングのための半導体テスト技術」、中国語のヒアリングの練習も兼ねて。ある程度専門用語はわかりそうだし、スライドもあるし、なんとかなるだろう。なおEnlgish-ENが選べるんだけど、同時通訳が入るわけでもなさそう。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-25_14.16.45.png" width="240px">

このオンライン生放送、スライド中に自分側のマウスカーソルを置くと進む・戻るボタンが現れて、その時点までの前のスライドを戻って見られる。これは見返しにめちゃ便利。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-25_14.11.08.jpg" width="240px">

JLCPCBに出してたXiaomiGlassに老眼鏡をはめるための治具（老眼鏡のつるははずす）、届いた。はめる側がちょっと小さすぎたので、何かで盛ってはまるようにしよう。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-25_14.11.21.jpg" width="240px">

あと、注文したのは1個だったのに、なぜか2個入っていた。オマケなんかな。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-25_18.44.19.jpg" width="240px">

ポチってあったTD-4互換の自作CPUキットが届いた。ICを含めて全部の部品が挿入実装だった。回路構成が「CPUの創り方」と同じかは、これから確認する。別の会社の別のTD-4互換CPUキットも買ってあるので、それと回路構成などの違いを見てみよう。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-25_17.36.36.jpg" width="240px">

「A Brief History of Computer (CPU通説課)」という中国のっ人が書いた本があったので、買ってみた。ざっと見てみたところでは、MPU（マイクロプセッサ）というよりコンピュータの歴史がメインで、しくみ・原理、歴史や最近の傾向やホットトピック、などが細かい単位にまとまっている、よさそうな本だった。最後の章で、昨日書いていた中華CPUの[「龍芯」](https://ja.wikipedia.org/wiki/%E9%BE%8D%E8%8A%AF)が詳しめに書かれていた。

昨日オンライン聴講していた[aiwaデジタルの製品発表会の記事](https://www.shenzhen-fan.com/news-2022-08-25-aiwa-digital-jenesis-launch-event-for-a-new-product/)が出ていた。こちらで受託製造をずっとやっているJENESIS（社長はいつもお世話になっている藤岡さん）がaiwaブランドを取得して、aiwaブランドでデジタル機器を発売する、というもの。JENESISがずっとやってきた、作る側と一緒に走る量産会社、というコンセプトの集大成のように見える。お金を出すだけ、綺麗なプレゼンでピッチをさせるだけ、量産化支援といいながら半導体不足で1年以上もつくれない、のは、オープンイノベーションなのか？という問は、極めて明確で鮮烈。今後も応援して見守っていきたいと思う。

***

[前の週へ](2207-2.md) /
[次の週へ](2208-4.md)

今週の
[日常](../diary/2208-3.md) /
[研究](../research/2208-3.md) /
[コロナ関連](../covid19/2208-3.md) / 
[中国語勉強](../chinese/2208-3.md) / 

[SZdiaryトップ](../../README.md)
