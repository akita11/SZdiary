## 22/07/10, Sun

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-10_9.32.26.png" width="240px">

JLCPCBに出したPCB、データチェックで「スロットと基板端の間は4mm以上必要」という理由でハネられたんだけど、[そんなルール、どこに書いてあるんだ・・・？](https://jlcpcb.com/capabilities/Capabilities)その間隔って、この部分の距離のことだと思うんだけど。というわけで問い合わせ中。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-10_14.00.00.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-10_14.00.00.jpg" width="240px">

[以前、M5Stackでインターンしてて大学院に進学したいからと研究生の受け入れ打診](https://www.facebook.com/akita11/posts/pfbid02aCttc3uXUaKfawArAsDKbRxebZzKU8ZoTY7cv8J9S1SzmJQyAPWD4Ymmj5Fnaf8hl)があった[Tongさん](https://twitter.com/icyqwq)（右から二人目）と、お昼ごはん。いま珠海で一緒に住んでいるという友達の张さん（右端）といっしょに、深センに週末で遊びに来たらしい。Tongさんは、いまはSiPEEDで（リモートで）働いてるんだけど、M5Stackで働いてたころは、M5PaperのライブラリやUnitV2の仕込みにだいぶ関わっていたんだそうだ。张さんも当時いっしょにM5Stackで働いていて、[ATOM Socket](https://shop.m5stack.com/products/atom-socket-kit-hlw8023-jp-us)は彼が設計したらしい。すごいな。


## 22/07/11, Mon

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-11_11.36.13.png" width="240px">

おとといのJLCPCBの「間隔4mm」の件、返事きた。ここの間隔のことだそうだ。この条件はWebには載ってなくてこれから載せるとのことで、割れるリスクOKなら製造可、とのことなので、製造依頼してみた。まあ大丈夫だろう。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-11_13.01.11.png" width="240px">

Grove給電に貼る機能表示シール、Jimmyはコネクタの上側はどう？と言ってるんだけど、こっちのほうが給電の流れがわかりやすくていいんじゃないかと思うので提案してみたら、イイネ、とのことでこの方針で。詳細はJimmyがデザインしてくれるとのこと。その方がデザインの統一性があっていいな。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-11_15.11.35.png" width="240px">

こんなデザインが送られてきた。たしかにM5Stackっぽさがある。

いろんなチップを開封して写真をとってるZeproBars、レーザーでプラスチックパッケージを飛ばすのをやって、パラメータ出しに苦労している。自分もやったことあるけど、やっぱむつかしいよね。
https://zeptobars.com/en/read/laser-decapsulation-fail-not-so-fast

このまえ試作していた[STCmicroのマイコンがのったProMini型ボード](https://www.switch-science.com/catalog/8216/)のスイッチサイエンスので委託販売が始まった。

午後のゼミのあと、博士課程の学生さん（留学生）と、ちょっと混み入った研究の話をしていた。ゼミの時間だと時間がたりなくて十分に理解しきれていなかったところを、ゆっくりと理解をして詳しい議論ができたのはよかった。


## 22/07/12, Tue

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-12_10.54.13.jpg" width="240px">

今日は华强北に来る用事があったので、SEGビルの中をぶらぶらしてみた。最近は寂れてきている、という話は聞くけど、たしかにこんな感じの空きスペースが増えてる気がする。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-12_11.16.26.jpg" width="240px">

この前買うか迷ってた、USB充電式リューターを買ってみた。75元。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-12_13.30.00.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-12_13.11.35.jpg" width="240px">

今日は高須さんが会うというので混ぜてもらった、こっちで[Linuxが動く小さなハンドヘルドPC](https://pocket.popcorncomputer.com/)をつくっているというJose氏に。[C.H.I.P.というLinuxが動く小さいボードをつくっていたNextThings](https://shop.pocketchip.co/collections/frontpage/products/c-h-i-p-new)で働いていたそうで、もう5年、こっちにいるんだそうだ。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-12_13.15.25.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-12_13.23.26.jpg" width="240px">

今日は、こんな感じのUSBにささる口のあるスティック型のLinuxPC。何に使えるかすぐにピンとこないけど、面白そう。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-12_13.11.27.jpg" width="240px">

その他にも、こんなサイズのも。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-12_13.11.30.jpg" width="240px">

このサイズでできたポイントは、プロセッサのメーカであるAllwinnerのARMプロセッサに、SDRAMのチップを封入したSiPで、これのおかげで外に引き出すピン数が劇的に減って、2層基板でできるようになったそうだ。こういうSiPを、どれぐらいのロットで作ってくれるのかは聞かなかったけど、シリコンよりは初期コストが低いから少ないロットでもやってくれそうだ。なによりこういうメーカとの距離の近さが、深センのエコシステムだよな。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-12_16.30.00.jpg" width="240px">

午後は、[分解のススメ](https://medium.com/bunkai/tagged/%E5%88%86%E8%A7%A3%E3%81%AE%E3%82%B9%E3%82%B9%E3%83%A1)でもよく出てくる、[JieLi（珠海市杰理科技）](http://www.zh-jieli.com/)の深センオフィスへ。Bluetoothイヤホンとかを分解するとかなりの確率で入ってるチップをつくってるファブレスの半導体メーカ。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-12_14.50.15.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-12_14.51.09.jpg" width="240px">

「チップから未来へ」

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-12_15.02.51.jpg" width="240px">

会社のスローガンは「用芯美好世界 / Chips Delite the World」。とてもよい。

話は盛り沢山すぎるんだけど、備忘録的に箇条書きで

- 社員は400人で、3/4がエンジニア。SDK開発とチップ設計が半々ぐらい。
- 彼も、会社に入るまではチップ設計は未知の世界だったけど、やってみたら、そうでもなかった（LEGOを作るようなものだった、と）
- DACなどのアナログIPは、購入したものかと思っていたのだけど、実際には自家製。コストをおさえるのに効いている。当初は電子ピアノのようなおもちゃ向けの低価格・低性能のものからはじまった会社で、そこから徐々に設計の経験と蓄積を重ねていって、自家製でできるようになった。
- 徹底的にニーズ志向。つまり依頼案件に対して、最適な解を出す、ということを徹底している。
- 設計ツールは業界標準のCadence/Mentorのツール
- テクノロジノードは現在は40nmがメイン、製造は上海のHHGraceがメイン。WiFi/Bluetoothのように規格が決まっているものは、やみくもに微細化する必要はなく、あくまでもニーズ志向。電源制御(PMU)を工夫することで、28nmの他社チップと同程度の消費電力にできる技術力もある。
- 製造プロセスが違うフラッシュメモリなどは、他社からダイを購入してSiPにまとめる
- コストを抑えることがだいじで、それを最適化するために、使うテクノロジノードやプロセッサ(ARM/RISC-Vや、8bit RISCなど)、メモリ(RAM)容量などを、用途ごとに細かく設計する。その結果として、チップの種類が増える。（ただそれにともなって設計・マスク・検証のコストが上がるんじゃないかと思うのだけど、その話は聞くのを忘れていた。ただそれを補ってあまりあるコスト低減効果ということだろうと推測）
- 新規市場の開拓も進めていて、インド市場は参入済み、ただ現地での組み立てがイマイチ（製品の性能がイマイチなのをチップのせいにされる）で困ってる。
- 全体的にエンジニアの人材不足。学生を紹介してほしい。（たしかに会社名が表に出る機会が少ないので、その点では不利なのはありそう）

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-12_17.34.51.jpg" width="240px">

帰り際に、先日ネタとしてTaoBaoで買ったJieLi純正書き込み機を見せたら、大ウケして、Bluetoothオーディオのチップとその評価ボードをもらってしまった。GitHubやGiteeにSDKのソースがあるようなので、試してみよう。

微細化することが目的にならない、ニーズにあわせた最適な製造プロセスを使い、低コスト・ワンチップという「価値」をつくりだしている、ファブレス半導体メーカの一つの明確な形が、ここ深センで生まれているのは、それを生むエコシステムを含めて、とても興味深い。

そういえばRaspberryPicoを使って(picoprobe)RP2040に書き込む手順、やっとできた。いままでできなかったのは、SWD/SWCKがショートしてたのが原因というオチだった。外付け水晶も不要。ただ書き込みは終わってるんだけどVerifyで、CRCエラーっぽいいのが出てるので、もうちょっと詰める。これ、実は[カワヅさん](https://twitter.com/necobut)が作ったボードでRP2040がpicoprobeで書き込めない、という話を聞いて、そのボードのデータをもらってJLCPCBにPCBAを出していたボードで、これをやっていたんだけど、結果としてRP2040をUSB経由で書き込むのではない、普通のマイコンっぽく使う方法の経験がだいぶ積めてよかった。ボードの構成としては、[こちらのボード](https://github.com/ArtifactNoise/AN-221)にだいぶ近い。


## 22/07/13, Wed

先週の7/7-9に、Parisでやってた[FSiC (Free Silicon Conference)](https://wiki.f-si.org/index.php/FSiC2022)、オンサイト開催で、[発表の録画は後日公開](https://peertube.f-si.org/videos/)、ときいたんだけど、まだみたいだなー。
Freeというのはタダという意味だけじゃなくて「制約からの開放」という意味で、オープンソースな設計ツールやPDKなど、まさに自分の研究どんぴしゃなところ。

昨日話を聞いていた、AllwinnerのSiP、もう少し詳しく話を聞いてみた。Allwinnerのパートナー企業にSiPメーカがあり、Allwinnerからウエハやシリコンダイを買ってカスタムのSiPをつくる（場合によってはデータシートをつくってそれを外販もする）、のができる、とのこのこと。そんなメーカがあるんか。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-13_16.10.47.png" width="240px">

夕方、微妙に時間があまったので、そういえばJLCPCBの金属3Dプリントをなんか試してみたいなー、と思っていたので、思いつきで図面をひいてみた。実寸の4倍で、見積もりだと1000円くらい。

とある人から「日本の半導体業界を学生さんがよく知ってもらうための資料」についてコメントを求められたんだけど、まあはっきりいって、あまり好きな内容じゃない。「社会は半導体がないとまわらない、だから大事な技術。日本の半導体業界はまだまだ捨てたものじゃない」という訴求は、事実ではあるんだど、なんというか、押し付けがましいように思う。もちろん、資料を作る人の都合・意図があるし、それを読んだ人がどう感じるかも人それぞれだから、自分がとやかく言うことではない。少なくとも事実誤認はないから、いいんじゃないですか、としかいいようがない。それよりも「こんなに楽しい業界なんすよ！いっしょにやろうよ！」というメッセージのほうが、いいんじゃないかと思うんだけどね。


## 22/07/14, Thu

昨日の「半導体業界の紹介資料」について、やっぱ自分の考えを伝えることにした。
まずこれまで近くで学生をみていて、彼らが感じているであろう感想は、「社会に必要なのはわかった。でも君が必要だと言われてもなあ」というもの。
これは、最近よくみる、高度成長期にたくさん作られたコンクリートの社会インフラが耐用年数を迎えてメンテナスやリプレースが急務、と言うのににている。事実だし社会的な必要性が高いのもそのとおりなんだけど、若い人からすれば「そんな、昔の人がやったことの、尻拭いを、若い世代に頼む、なんて、勝手すぎないか」というのが正直な感想。もちろん、義務感、正義感から、そのような仕事を選ぶ人もいる。誤解を恐れずに言えば、福祉工学も似た流れのように思う。
話を半導体に戻すと、少し前の半導体業界からのメッセージは「日本はかつて半導体王国。しかし（理由はともかく）現在はこんなに落ちぶれてしまった。日本の半導体の復活は、若い世代にかかっている」というもので、「半導体が社会で大事なのはわかる。でも日本の半導体が落ちぶれたのは、（どう間違っていたかはともかく）あんたらのせいだろう。それを、我々になんとかしてくれ、といわれてもなあ」という感想になるわけで、コンクリートの話と同じ構図。さらにいうと「まだまだ未来が明るい成長」という言葉を聞くと、疑ってしまう。それは太平洋戦争末期に「まだ日本は勝てる」と言われて戦地へ送られた若者に通じる。実際、過去に、その言葉を信じて、再編まっただ中の半導体業界に就職し、消息不明になったり心身を病んだ学生を何人も見てきた。

しかし誤解をしてほしくないのは、私は半導体業界（日本の、も含めて）の将来を、全く悲観していない。むしろ、楽観している。それは「義務感・悲壮感、日本のため」ではなく、「半導体という、やろうと思えばなんでできる技術」に魅力的を感じ、半導体業界を選ぶ若い人を、多く見ているから。もちろん半導体の技術は、上うから下まで、とてつもなく幅が広く、すべてを学生のうちに（そしておそらく一生を通しても）学ぶのは無理。それでも、HDLだったりアナログだったりプロセスだったり、「おもしろい、そしてそこで勝負できる」と考える分野で、半導体を使って、勝負をしていく、そういう姿勢とマインドの若い人が、最近増えているように感じる。そして彼らが、（結果として）半導体業界を牽引していくのだと思いう。

そして、まだ「そのような魅力」に気づいていない若い人が多くいるのも事実。「半導体は、聞いたことはあるしどこでも使われてるのはわかるけど、その中身は自分のやりたいこととは関係ない」と考える人たち。これは、あまりにも大きな機会損失（その人達にとっても、半導体業界にとっても）だと思う。あとから「え、もっと早く半導体のことをよく知っておけば、自分のやりたいことの幅が大きく増えたのに」と感じるはっず。そんな人達に響く、「半導体が持つ無限の可能性」と「こんなに面白いものを、知らないのはもったいなさすぎる、だから一緒にやろう」というメッセージこそが必要だと思う。そして、それこそが、「技術の民主化」がもつ意味なのだと思う。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-14_11.22.34.jpg" width="240px">

今日は高須さんと一緒に、[宏斉光电子(HQG Optoelectronics)](http://harvatek.cn)という会社に見学に行ってきた。LED専門の会社で、インジケータ用のチップLEDから照明用の高輝度LEDなど、バリエーションが多い。発光部の半導体チップ自体は外から買ってきて（NeoPixel互換のものもあって、それの制御ICも）、ここは後工程専門の工場。以前訪問した[NeoPixel(WS2812)のWorldSemi](https://ifdl.jp/blog/?p=1170)と同じだけど、こちらのほうが規模がかなり大きい。カスタム品もかなりやっているようで、ある程度数が出る製品であれば、既製品から選ぶよりも、こういう会社にカスタム品をオーダーしたほうが、仕様もぴったりでいい、ということのようだ。特にLEDは、面を張るのに使うチップの数がとても多い場合も多いので、そういう点でも、カスタムLEDという業態は十分に理にかなっている。

工程は、まあ一般的な後工程。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-14_11.52.28.jpg" width="240px">

まずチップをリードフレーム（パッケージ）に載せる。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-14_11.58.54.jpg" width="240px">

ワイヤーボンディング。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-14_12.01.28.jpg" width="240px">

モールディング。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-14_12.02.07.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-14_12.02.39.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-14_12.02.10.jpg" width="240px">

梱包（テープにつめる）。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-14_12.12.04.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-14_12.13.44.jpg" width="240px">

あと下のフロアに、ICのパッケージ工場を立ち上げ中、とのことだった（会社の資料をみると、同じグループのJojon Microelectronicsという別会社のようだ）。シリコンダイを買ってきて、パッケージに入れる工程。

そのあと、高須さんからiMakerBaseに機材を置いてMakerスペースをつくりましょう、という話をもらっているので、場所の確認のためにiMakerBaseへ。場所はだいぶ自由度があるみたいなので、少なくとも日本に戻る前には工具類を置かせてもらおう。既にiMakerBaseでもっている機材もあるみたいだから、それを確認して、そこにない機材を少しずつ揃えていきたい。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-14_19.50.18.png" width="240px">

朝、ふとNHKの番組で素数の話をみてしまって、それからどうも気になって、[こちらのスクリプト](https://github.com/junpeitsuji/iwannatouchzeta)を使って（ruby.hがいるのでruby-devを入れたりzeta.soのファイル名を小文字にしたりという微修正をして）、ζ関数がFusion360へ降臨させてしまった。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-14_19.58.07.png" width="240px">

実部が1/2のゼロ点は6個あるし、実軸上の負の偶数の自明なゼロ点もちゃんと見える。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-14_20.02.33.png" width="240px">

50mmくらいに縮小すれば、JLCPCBの3Dプリントで200円くらいのようだ。真ん中の角みたいなところが折れちゃいそうだけど、ポチってみるか。


## 22/07/15, Fri

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-15_7.09.57.png" width="240px">

ちなみに昨日のζ関数、スクリプトから出力したままのSTLだとサイズがかなり大きくて長辺が1.5mもある。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-15_7.11.16.png" width="240px">

ためしにJLCPCB 3Dプリントにアップロードしてみたらお値段は6,629,551円で、これは偶然にも素数という。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-15_09.36.24.jpg" width="240px">

このまえJLCPCBにだしていたGrovePowerのUSBコネクタの位置の調整はOKそう。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-15_11.21.26.png" width="240px">

コネクタの色について議論。当初は、給電される方の2個は赤がいいかな、と思ったんだけど、赤はM5Stack的にはPortA(I2C)の色なので、まぎらわしい、と。まあ確かに一理ある。基本的にコネクタの機能ごとに色が違うので、3個とも白にして、ラベルで区別するのがいいんじゃ、という話になった。なるべくラベル上ではっきり区別がつくように、オレンジで示すのを提案して、こんな感じで落ち着きそう。


***

[前の週へ](2207-1.md) /
[次の週へ](2207-3.md)

今週の
[日常](../diary/2207-2.md) /
[研究](../research/2207-2.md) /
[コロナ関連](../covid19/2207-2.md) / 
[中国語勉強](../chinese/2207-2.md) / 

[SZdiaryトップ](../../README.md)
