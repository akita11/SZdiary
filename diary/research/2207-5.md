## 22/07/31, Sun

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-31_13.22.23.jpg" width="240px">

ｽﾀｯｸﾁｬﾝ 、FeeTechのFS90（SG90互換）についてるネジが微妙に短くて、足の部分が固定できない。M2x10ネジでいけそうなんだけど、どこで売ってるんだろう。TaoBaoでもいいけどホームセンターで八幡ねじ的なのが。华强北のお店で10本くらいのバラ売りってしてくれるんかな・・・

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-31_13.47.57.png" width="240px">

TaoBaoだと、まあ最低でも100本とか200本で、さすがにちょっと多い。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-31_13.49.40.png" width="240px">

こういう小ねじセットのほうが、あとあと使いそうだから、これをポチってみる。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-31_14.15.04.jpg" width="240px">

ネジが微妙に短くて届かないなら少し削ってみればいいのでは？と、はんだごて（K型）をあててみて、ちょっと削れたけど、まだ届かないない。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-31_14.21.17.jpg" width="240px">

そういえばこのまえ华强北でリューターを買ったのを思い出して、それでも削ってみた。削れるんだけど、まだ届かないなー。あまり削っちゃうと強度が足りなくなりそうで怖いから、やっぱ買ったネジが届くのを待つか・・・

と思いつつ、待ちきれなくて、禁断のボンドで仮に固定して、[ランダムモードで動かしてみた](https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-31_17.17.41.mp4)。・・・これだけでも、なんか生物みを感じる(*´ω｀*)

ｽﾀｯｸﾁｬﾝのFeeTechシリアルサーボSCS0009版、FeeTechのデバッグボードURT1でサーボのIDを設定して[個別に制御はOKそう](https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-31_14.39.32.mp4)。

ｽﾀｯｸﾁｬﾝの制御基板に部品をつけようと思ったら、肝心のMbusコネクタの在庫がないことに気づいたのでTaoBaoで発注。ついでに電源スイッチのスライドスイッチもサイズが同じのをSZLCSCで探す→その型番でTaoBaoで検索、で発注。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-07-31_13.07.01.png" width="240px">

SZLCSCの部品分類、部品名称の中国語表記の参照として、いいかもしれない。スイッチは开关(kai1guan1)、スライドスイッチは滑动(hua2dong4)开关。

UIFlow版ｽﾀｯｸﾁｬﾝに使おうと思ってた[M5StackAvatar](https://github.com/h-akanuma/M5StackAvatarPython)、_threadで定期更新してるけど、これ[だいぶ古いMicroPython用](https://github.com/m5stack/M5Stack_MicroPython)で、いまだとTimerブロックから生成されるコードを参考にやるのがよさそうだな。

[とりあえずStartに初期化や内部で使う関数を定義したもの](https://github.com/akita11/SZdiary/blob/main/diary/photo/M5StackAvatar_220731.m5b)をまとめてみた。あとはspeak、exclamation、paleの処理を書くだけで、だいたいめどはたったかな。

[Elecrowのアクリルレーザーカット](https://www.elecrow.com/acrylic-cutting.html)、100x100mmが5枚で7ドルとかなんだな。このまえリモート納品したM5Core2BaseLiteのアクリル部品、これで日本あてに送ってみるか。PDF（をzipしたもの）でOKそうだ。


## 22/08/01, Mon

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-01_7.30.27.png" width="240px">

ｽﾀｯｸﾁｬﾝ 、どうしても頭が重くて動くとズレてしまうの、足のパーツだけでも金属にすれば安定するのでは？と思って、JLCPCBの金属3Dプリントで試してみる（ちょっと高いけど）。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-01_8.22.02.png" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-01_8.24.29.png" width="240px">

JLCPCBのPCBA、てっきり表面実装部品だけ、と思いこんでたんだけど、TH部品も指定できる（手付け費用が計上される）のね。（KiCADライブラリと原点が違うのが多いので、ここで座標がズレてるのはしょうがない）

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-01_10.13.08.png" width="240px">

楽しみにしていた今週木曜からの[「深圳国际半导体展」が延期（日程未定）](https://mp.weixin.qq.com/s/mNEdC_4lKOrWTj-HFQn1Rg)になってしまった・・・(´·ω·`)

金沢大からの留学プログラムについて、安先生と少し相談。当初サバティカルを予定していた2000年に、滞在中にあわせて2000年9月に2週間（観光ビザで滞在できる短期間）の短期留学プログラムを計画していた。コロナ禍で一度もできずにいるわけだけど、こっちにいるうちに、来年以降飲めどは立てておこうと思った。基本的には南方科技大（のSME）で受け入れOKで、当初計画していた研究室での研究活動もOKとのこと。コロナ禍以前は海外からの短期留学も受けれいていたから、実績もある。必要となったら交流ビザなどのビザ発給のサポートもたぶんOK。ただビザや検疫隔離のことは状況がよめないので、適宜。プログラム案をつくってから詳細をつめていく、ということにした。基本的にOKという方針が確認できただけれも心強い。なおiMakerBaseで計画している融合の学生のインターンの話もして、それと時期を重ねるのものいいかな、とは思った（自分がこっちに来て世話をする期間を重ねられる）。時期は、当初は自分のサバティカル滞在中にあわせて9月を計画していたけど、それにこだわる理由もなく、日本の夏休みや春休みでもいい。検疫隔離の期間の長さによっては滞在期間も調整したいけど、それはいまは予測できないから、追って状況の変化を見ながらつめていくことにしよう。検疫隔離期間はオンラインで予習準備、というのもいい。なお安先生の複数の知り合いの情報では、10月から徐々に出入国が緩和されるようだ、となんだけど、いまは気をもんでもしょうがない。なお逆向きの南方科技大から金沢大への短期留学は、この金沢大生のプログラムをやってから徐々に計画していこう、ということになった。

ちなみに[安先生が6月にテープアウトしていた28nmステレオ視SoC](https://github.com/akita11/SZdiary/blob/main/diary/research/2205-5.md#220601-wed)は、チップが9/1に届く予定で、評価ボードはもう準備を進めている、んだそうだ。なんと投稿予定の[ISSCC](https://www.isscc.org/)の〆切が9/7で、その1週間が勝負、なんだそうだ。すごい短期決戦だ。無事動いてほしい。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-01_13.11.09.png" width="240px">

こんな情報をみかけた。深セン市が教育研究機関に支出している金額のリスト。1位の深セン大が56億元（1000億円）。2位の南方科技大が37億元（750億円）。最近よく聞くハルビン工科大深セン校も12億元（240億円）。ケタが違うな。ちなみに日本だと国からの運営費交付金が、東大で870億円、金沢大で160億円くらい。ちなみにTHE大学ランキングだと、南方科技大(162位)、深セン大(350位)、ハルビン工科大(500位）で、東大(35位)、清華大(16位)だから、清華大だともっとすごいんだろうな・・・

UIFlowのCustomBlockとして使えるAvatarの[M5Avatar、ひとまず完成](https://www.dropbox.com/s/atyyzuwbdnzttxc/M5StackAvatar.m5b?dl=0)。[こんな感じで、普段はまばたき、セリフをしゃべるときは口が動いて、！と冷や汗も出せる](https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-01_16.38.00.mp4)。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-01_16.32.19.png" width="240px">

UIFlowからは、こんな感じのブロックとして使える。本家みたいに微妙に目と口が上下に動くと、より生き物っぽくなりそうだな。これでUIFlow版 ｽﾀｯｸﾁｬﾝ つくろう。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-01_20.00.40.png" width="240px">

ｽﾀｯｸﾁｬﾝで使おうと思って買ったFeeTechのシリアルサーボSCS0009、秋月の別のFeeTechシリアルサーボの商品ページに載っている使い方説明書の最後のページに制御コマンドがまとまってるのを見つけた。N81のシリアルでチェックサム付き、まで分かればあとは早そうで、いろいろはかどりそう。

夕方、学生さんとちょっとがっつりめの研究のディスカッションをしていた。


## 22/08/02, Tue

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-02_13.54.07.png" width="240px">
<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-02_9.40.01.png" width="240px">

ｽﾀｯｸﾁｬﾝ のUIFlow版、サーボ側、まずはPWMサーボ。標準のサーボブロックのCustomポートでできる。ピン配置はSDA/TX側をサーボがつながってる2or5等、SCL/RX側はつながってないので適当でOK。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-02_9.40.06.png" width="240px">

サーボの動作をなめらかにするの、とりあえず時間と角度指定で動くようにしてみた。あとは速度の台形制御だけど、計算式たてればこの延長でできそう。こんな感じで使えるBlockMakerでカスタムブロックをつくろう。。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-02_21.18.05.png" width="240px"

で、サーボの動作、加減速して生き物っぽくするの、移動角度と移動時間、加減速の時間を与えて、制御角度をどう変化させればいいか、を求めてた。計算間違ってなければ、この結果を使えばいけるはず。明日実機で試してみよう。

FeeTechのシリアルサーボ、[メーカのWebページ（英語／中国語両方）](https://www.feetechrc.com/6v-23kg-serial-bus-steering-gear_65522.html)を探してるんだけど、制御コマンドの表がみつからないなー・・・秋月資料には送信コマンドを作成するExcelシートもあると書いてあるんだけど、どこにあるんだろう・・・探し方が悪いんかな。と思ったら、GettingStarted中国版PDFから[Giteeリポジトリへのリンク](https://gitee.com/ftservo/SCServoSDK)があった。PythonスクリプトやVisualC#サンプルとかはあるようだけど、生コマンドの表はないなあ。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-02_14.46.27.jpg" width="240px">

だいぶあいだが空いてしまったM5Stack製品開発の最後の1個、DCモータを駆動するHブリッジUNIT、最小限のマイコンのプログラムを書いて、モータをつないでの動作がOKそうだ。I2Cバスのプルアップ抵抗をつけるのを忘れていたので、基板設計にそれを追加。マイコンのプログラムは、だいたいめどはたってるから、あとはPWMサイクル変更時にデューティー比も変える、みたいな細かいところの実装だな。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-02_18.04.41.jpg" width="240px">

[高須さんが2018年ごろに書いた深センガイド](https://github.com/akita11/SZdiary/blob/main/diary/diary/2207-5.md#220802-tue)を読んでいて、CEECという場所があったのを思い出した。深业上城というショッピングモールの中にあって、元気なスタートアップ企業が入居して、いつもCES（ラスベガスで1月に開催される家電見本市で、スタートアップ企業の登竜門でもある）みたいなのを、という触れ込みだった。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-02_18.32.28.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-02_18.32.41.jpg" width="240px">

この本で紹介された2018年当時もぜんぜん閑古鳥が鳴いてたんだけど、今日も、DJIのオフィス（子供向けの教室もあるみたい）があるぐらいで、ほとんど人気（ひとけ）がなかった。こういう失敗例もあるよなあ。ショッピングモールの方はまあまあ賑わっててオシャレスポットもあるんだけど。

夕方に[TwitterでJLCPCBのPCBAの部品検索が使いにくい](https://twitter.com/ichirowo/status/1554421263631691776)という話があって、つい乗ってしまった。これまでにも何度か書いてる気がするけど、部品検索で複数検索できない、100n/0.1uやnMOS/n-MOS等の表記ブレがある、などの点以外にもいくつかあげてみた。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-02_20.24.38.png" width="240px">

検索結果なし、このページから、検索条件指定に戻る方法がない。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-02_20.28.09.png" width="240px">

部品ページに必要な情報が載っていいないものがある（この例だとLEDの色が書いてなくて、データシートをみないとわからない）。

いずれも、Web作った人が自分でPCBAを注文すればすぐに気づくと思うんだけど、そういうテストしてないんだろうなー。ほんと、アカン例だと思う。


## 22/08/03, Wed

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-03_10.14.13.jpg" width="240px">

Xiaomiから、メガネ型カメラ（AR用小型ディスプレイ付き）が出るようだ。正確にはクラウドファンディングで、今日の10時から受付開始。2500円だから5万円ほど。カメラで見たものを翻訳する、みたいな機能もあるようだ。分解の記録用によさそうなのと、何より面白そうなのでポチってみた。8/20発送予定、とのこと。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-03_11.50.34.jpg" width="240px">

今日の午前は、小型ロボットアームのmyCobotなどを作っているElephantRobotics（大像机器人）に、マイクロソフトリサーチの福本さん、高須さんと一緒に行ってきた。マーケティングの人たちが、研究者、特にHCI（ヒューマン・コンピュータ・インタラクション、人間にとって使いやすいコンピュータに関する研究、ユーザインタフェースも含む）分野の研究者にどうやって売り込むといいか？という相談。要点としては、(1)HCI研究者は「やりたいこと」があるので、それを実現するための「細かいこと（どういう軌道でアームを動かすか、衝突を回避するか、使いたいセンサをどうやってつなぐか、など）」を気にしなくても使えるような「抽象化」が大事だろう（これはM5StackのUIFlowのBlocklyで、非エンジニアが作品を作るのに専念できるのと似ている）、(2)そもそも「ロボットアームを使おう」という発想がない場合が多いので、「ああ、そういう使いかかたもあるのか」という使用例（遊びみたいなものも含む）を多く示すことが大事だろう、という話をしていた。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-03_14.29.06.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-03_14.30.55.jpg" width="240px">

そういえばRaspberyPiは日本だととても品薄なんだけど、中国だと結構売っている。定価販売、みたいなルールが薄い（浸透していないだけかも）ようで、多少値段をあげつつ、いろいろなルートで流通（転売まがいもあるかもしれない）しているようだ。まあ多少高くても入手できるだけ、ユーザとしては、だいぶまし、か。


## 22/08/04, Thu

## 22/08/05, Fri

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-05_14.08.21.png" width="240px">

メタルスライムならぬメタルゼータ関数（断面カット）、JLCPCBだと3000円くらいか。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-05_21.29.53.png" width="240px">

午後に、最近ちょっと都合があわなくて欠席が続いていた定例のテレカンに久しぶりに参加。ただ、なんだかちょっとなー、という話が出ていたので、ちょっと問題提起をして、終わったあとに関係者で1時間ほどMTG。これまでなかなかしっかりと伝えられなかった懸念を伝えて、なかなかしっかりできなかった議論ができてよかった。コミュニティ大事、といいながらコミュニティに入らないのはwhy not？ 普段、"done is better than perfect"と言っている人が、英語できない、とか、相手が忙しそう（忖度）、なんてのは、できない／やらない言い訳でしかない。

先日からM5Stackにおじゃまして設計し、多大なサポートをいただきながら量産まで持ってこれた、[M5StackCore2にPortB/C/D/Eを生やすモジュール、いよいよ発売になった](https://mag.switch-science.com/2022/08/05/m5stack-extport-core2/)。これまでUIFlowで使えるPortD/Eは、本家からは使えるハードウエアが出ていなかったけど、これでいよいよ「本家の製品」で使えるようになったことになる。回路的にはかなり単純なものではあるものの、企画段階からM5Stackの人たちとdiscussionをしつつ、現地でのデバッグと調整を経て、ここまで持ってこれたのは、とてもよい経験となった。初回ロット分（ぜんぶで100個、そのうち日本で発売分は90個）は下手ですがサインが入っている。決して基板の汚れではないので、それが理由の返品はご遠慮いただければ・・・w
あ、これまで委託販売で出していた[PortA2個もあってアクリル底板もついている"M5Core2BaseLite"](https://www.switch-science.com/catalog/6763/)も継続販売中ですよ、と。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-05_17.28.50.png" width="240px">

しかし自分の下手な字が、商品ページの写真に写っているのは、なかなか感慨深い。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-05_17.29.27.png" width="240px">

残念ながらTaoBaoでは買えないようだ。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-05_21.08.40.png" width="240px">

と思ったら、夜には買えるようになっていたので、早速ポチった。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-05_17.36.19.png" width="240px">

JLCPCBの日本への発送方法、OCSが使えるとうれしい、という提案をしてたんだけど、選べるようになったそうだ。これはめちゃありがたい。OCS NEPだと送料が600円とな。彼らに「海外から注文するときに送料と配送時間がどれぐらい大きな問題か」というのをわかってもらうのに、ものすごく長い時間をかけて説明しました。その甲斐があって、とてもうれしい。


## 22/08/06, Sat

昨日の淄博市の産業政策の話（セレモニーの挨拶）を聞いていて、高須さんと話をしていた。基本的に「未来が明るい」とみんな信じているから、それに向かっていろいろ動く、という点は、景気がいいところにだいたい共通していて（高度成長期の日本もそう）、そしてそれを支える科学技術が大事ということをみんながわかっている、という点も共通している。その点、日本は（原因や経緯はいろいろあるとして）科学技術に対する不信が根強く（これは現在のアメリカの多くの市民もそう）、それが結果としてエンジニアの不遇につながっている。それに関連して、[2016年にシンガポールのリー・シェンロン首相がアメリカのシリコンバレーを視察したときの話](https://www.todayonline.com/singapore/spore-needs-rethink-value-engineering-pm-lee)がとても興味深い。シリコンバレーでは多くのシンガポール出身のエンジニアが働いているが、彼らから、いずれシンガポールに帰りたいと思っている、しかしシンガポールではエンジニアの仕事がパッとしないから帰れない、という話を聞いたリー首相は、「エンジニアをsexyな職業にする」という方針を打ち出し、それを実現する政策をうっていく。シンガポールでSTEAM教育やMaker活動が活発なのも、その一環。実際にエンジニアがsexyな職業になっていくのには時間がかかるだろうけど、それでも進めないと進まない。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-06_08.44.24.png" width="240px">

どういう経緯かわからないけど、苏州(su1zhou1)（蘇州、上海のすぐ隣）の[四方杰芯](http://www.full-way.com/)という会社からメールが届いた。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-06_08.54.01.png" width="240px">

資料をみると、ファブレスの半導体メーカでデザイン業務もやっている方案公司みたい。開発した製品例を見ると、カスタムマイコンや電源制御ICが多いようだ。製造プロセスを見るとサブミクロン(0.5um - 0.1umあたり）が多く、ファブは「HJTC」と書いてある。[HJTC](http://www.hjtc.com.cn/English/aboutHJ/aboutUs.asp)のWebをみると、台湾の大手ファウンドリUMCの子会社で、苏州の工業団地内にある、8インチウエハ専門の工場で月産8万枚とある。こんなところにこんなファブがあるんだな。

メールには、TSMCとSMICのMPWシャトルの案内・スケジュールが添付されていた。こういうサービス（の仲介）もやってるんだな。

午後はiMakerBase淄博で、これの関連イベントとして「2022年中日(淄博)イノベーション＆アントレプレナーシップ・フォーラム」で、半導体産業について少しお話。非エンジニア向けなので、久しぶりにスライドを大幅に作り直した。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-06_14.10.49.jpg" width="240px">

いろんな企業の紹介や高須さんのMakeの話、自分の半導体の話、などをする会だった。話者ごとにこんな感じのポスター（？）をつくってくれている。ちなみに日本語でしゃべって同時通訳が入ったんだけど、同時通訳音声が会場に流れるので、その音声が聞こえてしまい、ものすごくしゃべりにくかった（スピーチジャマー状態）。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-06_13.53.24.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-06_16.36.34.jpg" width="240px">

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-06_14.55.32.jpg" width="240px">

日本や中国も加盟する「地域的な包括的経済連携（RCEP）」に沿った情報交流、ということのようだ。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-06_14.13.32.jpg" width="240px">

こんな看板があって、嘉信というのはけっこう大手のVCらしく、そこと共同の基金をつくってスタートアップ投資などをしているようだ。

<img src="https://github.com/akita11/SZdiary/blob/main/diary/photo/2022-08-06_20.51.57.jpg" width="240px">

終わったあとに、こんな肩書をいただいてしまった。


***

[前の週へ](2207-4.md) /
[次の週へ](2208-1.md)

今週の
[日常](../diary/2207-5.md) /
[研究](../research/2207-5.md) /
[コロナ関連](../covid19/2207-5.md) / 
[中国語勉強](../chinese/2207-5.md) / 

[SZdiaryトップ](../../README.md)
